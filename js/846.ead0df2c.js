"use strict";(globalThis["webpackChunkqrscanner"]=globalThis["webpackChunkqrscanner"]||[]).push([[846],{1908:(e,n,t)=>{t.d(n,{Z:()=>Z});var l=t(9835),a=t(6970);const o={class:"row items-center"},c=(0,l.Uk)("Delete");function i(e,n,t,i,s,r){const u=(0,l.up)("q-icon"),h=(0,l.up)("q-item-label"),d=(0,l.up)("q-item-section"),p=(0,l.up)("q-item"),m=(0,l.up)("q-slide-item"),g=(0,l.up)("q-list"),f=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.j4)(g,{bordered:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.list,(e=>((0,l.wg)(),(0,l.j4)(m,{onRight:n=>i.onRight(n,e.id),"right-color":"red",key:e.id},{right:(0,l.w5)((()=>[(0,l._)("div",o,[c,(0,l.Wm)(u,{right:"",name:"delete"})])])),default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(p,{clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{onClick:n=>i.openUrl(e)},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{lines:"2"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,a.zw)(e.value),1)])),_:2},1024)])),_:2},1032,["onClick"]),(0,l.Wm)(d,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{name:"content_copy",color:"green",onClick:n=>i.copyText(e.value)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)),[[f]])])),_:2},1032,["onRight"])))),128))])),_:1})}var s=t(61),r=t(9302);const u={name:"HistoryList",props:["list","temp"],setup(e){const n=(0,r.Z)(),t=(0,s.oR)();function a(e){navigator.clipboard.writeText(e),n.notify("Copied!")}function o(e){"url"===e.type&&window.open(e.value)}let c;function i(e){c=setTimeout((()=>{e()}),1e3)}function u({reset:l},a){n.notify("Removed"),i((()=>{l(),t.dispatch("scan/removeItem",{id:a,temp:e.temp})}))}return(0,l.Jd)((()=>{clearTimeout(c)})),{copyText:a,openUrl:o,onRight:u}}};var h=t(1639),d=t(3246),p=t(9254),m=t(2857),g=t(490),f=t(1233),v=t(3115),w=t(1136),y=t(9984),k=t.n(y);const C=(0,h.Z)(u,[["render",i]]),Z=C;k()(u,"components",{QList:d.Z,QSlideItem:p.Z,QIcon:m.Z,QItem:g.Z,QItemSection:f.Z,QItemLabel:v.Z}),k()(u,"directives",{Ripple:w.Z})},8846:(e,n,t)=>{t.r(n),t.d(n,{default:()=>L});var l=t(9835);function a(e,n,t,a,o,c){const i=(0,l.up)("ScanArea"),s=(0,l.up)("ResultArea");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(i,{scanHeight:e.scanHeight},null,8,["scanHeight"]),(0,l.Wm)(s)],64)}var o=t(499),c=t(61),i=t(6970),s=t(1957);const r={class:"btn-area flex justify-between"},u={class:"camera-area",ref:"vTag"};function h(e,n,t,a,o,c){const h=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)("div",{class:"video-container flex flex-center",style:(0,i.j5)({"--qr-hl":a.hl_w+"px","--scan-height":t.scanHeight+"px"})},[(0,l.wy)((0,l._)("div",r,[(0,l.Wm)(h,{round:"",color:"grey-9",icon:"close",onClick:a.closePage},null,8,["onClick"]),(0,l.Wm)(h,{round:"",color:"grey-9",icon:a.camPaused?"play_arrow":"pause",onClick:a.pauseCam},null,8,["icon","onClick"]),a.flashState>0?((0,l.wg)(),(0,l.j4)(h,{key:0,round:"",color:"grey-9",icon:a.flashIcon,onClick:a.toggleFlash},null,8,["icon","onClick"])):(0,l.kq)("",!0),(0,l.Wm)(h,{round:"",color:"grey-9",icon:"wallpaper"})],512),[[s.F8,a.camEnabled]]),(0,l._)("video",u,null,512)],4)}t(8964);var d=t(6644),p=t(4682);const m={name:"ScanArea",props:["scanHeight"],setup(){const e=(0,c.oR)(),n=(0,d.tv)(),t=p.Z.hasCamera();let a=(0,o.iH)(null),i=(0,o.iH)(!1),s=null,r="",u=(0,o.iH)(400);function h(){let e=document.body.scrollWidth;u.value=e<=500?.9*e:450}function m(){try{const e=s.start();e.then((()=>{console.log("camera permission granted"),i.value=!0})).catch((e=>{console.error("camera permission needed!",e),i.value=!1}))}catch(e){console.error(e)}}window.addEventListener("resize",(()=>h()));let g=(0,o.iH)(0);function f(){g.value=!g.value,g.value?s.stop():m()}(0,l.bv)((()=>{h(),t.then((n=>{n?(e.dispatch("scan/hasCamera",!0),(0,l.Y3)((()=>{s=new p.Z(a.value,(({data:n})=>{r!==n&&(r=n,e.dispatch("scan/scanResult",n))}),{highlightScanRegion:!0,highlightCodeOutline:!0}),m()}))):e.dispatch("scan/hasCamera",!1)})).catch((e=>console.error(e)))}));let v=(0,o.iH)(-1),w=(0,l.Fl)((()=>1===v.value?"flash_off":2===v.value?"flash_on":"no_flash"));function y(){if(!(v.value<1))if(1===v.value)try{s.turnFlashOn().then((e=>{e&&(v.value=2)}))}catch(e){console.error("err in turning on flash",e)}else try{s.turnFlashOn().then((e=>{e&&(v.value=1)}))}catch(e){console.error("err in turning off flash",e)}}function k(){e.dispatch("scan/scanClear",0),s.stop(),n.replace("/")}return(0,l.m0)((()=>{!0===i.value&&-1===v.value&&s.hasFlash().then((e=>{v.value=e?1:0})).catch((e=>console.error("flash err: ",e)))})),{vTag:a,closePage:k,camPaused:g,pauseCam:f,camEnabled:i,hl_w:u,flashState:v,flashIcon:w,toggleFlash:y}}};var g=t(1639),f=t(4455),v=t(9984),w=t.n(v);const y=(0,g.Z)(m,[["render",h]]),k=y;function C(e,n,t,a,o,c){const s=(0,l.up)("HistoryList"),r=(0,l.up)("q-item-label"),u=(0,l.up)("q-item-section"),h=(0,l.up)("q-icon"),d=(0,l.up)("q-item"),p=(0,l.up)("q-list"),m=(0,l.up)("q-card"),g=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.j4)(m,{class:"result-card",ref:"cheight"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{class:"result-list",list:a.list,temp:!0},null,8,["list"]),(0,l.Wm)(p,{bordered:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.list,(n=>(0,l.wy)(((0,l.wg)(),(0,l.j4)(d,{clickable:"",key:n.id},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{onClick:t=>e.openUrl(n)},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{lines:"2"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(n.value),1)])),_:2},1024)])),_:2},1032,["onClick"]),(0,l.Wm)(u,{side:"",onClick:t=>e.copyText(n.value)},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{name:"content_copy",color:"green"})])),_:2},1032,["onClick"])])),_:2},1024)),[[g]]))),128))])),_:1})])),_:1},512)}w()(m,"components",{QBtn:f.Z});var Z=t(1908);const H={name:"ResultArea",components:{HistoryList:Z.Z},setup(){const e=(0,c.oR)(),n=(0,o.qj)([]);let t=(0,o.iH)(null);return(0,l.m0)((()=>{n.length=0,Object.assign(n,e.state.scan.currentResult),(0,l.Y3)((()=>{let n=0;null!==t.value&&(n=t.value.$el.clientHeight),e.dispatch("scan/listHeight",n)}))})),{list:n,cheight:t}}};var _=t(4458),b=t(3246),q=t(490),R=t(1233),W=t(3115),Q=t(2857),I=t(1136);const j=(0,g.Z)(H,[["render",C]]),S=j;w()(H,"components",{QCard:_.Z,QList:b.Z,QItem:q.Z,QItemSection:R.Z,QItemLabel:W.Z,QIcon:Q.Z}),w()(H,"directives",{Ripple:I.Z});const T=(0,l.aZ)({name:"ScanPage",components:{ScanArea:k,ResultArea:S},setup(){const e=(0,c.oR)();(0,l.bv)((()=>{(0,l.m0)((()=>{t()}))}));let n=(0,o.iH)(window.innerHeight);function t(){let t=e.state.scan.resultHeight,l=window.innerHeight,a=t/l;n.value=a<.2?l:a>=.2&&a<.3?.9*l:a>=.3&&a<.35?.8*l:a>=.35&&a<.42?.75*l:a>=.42&&a<.5?.68*l:a>=.5&&a<.56?.6*l:l}return{scanHeight:n}}}),x=(0,g.Z)(T,[["render",a]]),L=x}}]);